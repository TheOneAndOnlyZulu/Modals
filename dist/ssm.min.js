var SuperSimpleModal=function(){'use strict';function t(t,e,n,i,o,a,r){try{var s=t[a](r),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(i,o)}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,'value'in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError('Cannot call a class as a function')}(this,n),this.focusableElements='\n\t\t\ta[href]:not([disabled]),\n\t\t\tbutton:not([disabled]),\n\t\t\ttextarea:not([disabled]),\n\t\t\tinput[type="text"]:not([disabled]),\n\t\t\tinput[type="radio"]:not([disabled]),\n\t\t\tinput[type="checkbox"]:not([disabled]),\n\t\t\tselect:not([disabled])\n\t\t',this.willAnimate=!1,this.animationTimeout=1}var i,o,a,r,s;return i=n,o=[{key:'strip',value:function(t){try{var e=document.implementation.createDocument('http://www.w3.org/1999/xhtml','html',null);return e.documentElement.innerHTML=t,e.documentElement.textContent||e.documentElement.innerText}catch(t){return''}}},{key:'remove',value:(r=regeneratorRuntime.mark((function t(){var e,n,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]&&o[0],!(n=document.getElementById('ssm-modal'))){t.next=8;break}if(!this.willAnimate){t.next=7;break}return n.setAttribute('aria-hidden',!0),t.next=7,new Promise((function(t){return setTimeout(t,i.animationTimeout)}));case 7:n.remove();case 8:e&&e.focus();case 9:case'end':return t.stop()}}),t,this)})),s=function(){var e=this,n=arguments;return new Promise((function(i,o){var a=r.apply(e,n);function s(e){t(a,i,o,s,d,'next',e)}function d(e){t(a,i,o,s,d,'throw',e)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:'generate',value:function(t){var e=this,n=t.title,i=void 0===n?'':n,o=t.description,a=void 0===o?'':o,r=t.removeText,s=void 0===r?'Cancel':r,d=t.addText,l=void 0===d?'':d,c=t.mainContent,m=void 0===c?'':c,u=t.callback,v=t.params,f=void 0===v?{}:v,b=t.initiatorButton,p=t.willAnimate,h=void 0!==p&&p,y=t.animationTimeout,w=void 0===y?1e3:y;w&&(this.animationTimeout=w),h&&(this.willAnimate=h);var _=m?'<div id="content" class="ssm-modal__content">'.concat(m,'</div>'):'',k=a?'<div id="ssm-modal__description"><p>'.concat(this.strip(a),'</p></div>'):'',E='\n\t\t<div\n\t\t\tid="ssm-modal"\n\t\t\tclass="ssm-modal"\n\t\t\trole="dialog"\n\t\t\taria-modal="true"\n\t\t\taria-labelledby="ssm-modal__title"\n    \t\taria-describedby="ssm-modal__description"\n\t\t\taria-hidden="false"\n\t\t>\n\t\t\t<div class="ssm-modal__container">\n\t\t\t\t<h3 id="ssm-modal__title">'.concat(this.strip(i),'</h3>\n\n\t\t\t\t').concat(k,'\n\n\t\t\t\t').concat(_,'\n\n\t\t\t\t<div class="ssm-modal-buttons is-flex">\n\t\t\t\t\t<button\n\t\t\t\t\t\tid="ssm-modal__close"\n\t\t\t\t\t\taria-label="Close"\n\t\t\t\t\t\tclass="btn btn--preview"\n\t\t\t\t\t\ttitle="Close modal"\n\t\t\t\t\t>').concat(this.strip(s),'</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid="ssm-modal__do_it"\n\t\t\t\t\t\tclass="btn btn--fill"\n\t\t\t\t\t>').concat(this.strip(l),'</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>');document.body.insertAdjacentHTML('beforeend',E),this.initiateFocusTrap('ssm-modal'),document.querySelector(this.focusableElements).focus(),document.getElementById('ssm-modal__close').addEventListener('click',(function(){return e.remove(b)})),document.getElementById('ssm-modal').addEventListener('click',(function(t){'ssm-modal'===t.target.getAttribute('id')&&e.remove(b)})),document.body.addEventListener('keydown',(function(t){var n=t||window.event;('key'in n?'Escape'===n.key||'Esc'===n.key:27===n.keyCode)&&e.remove(b)})),document.getElementById('ssm-modal__do_it').addEventListener('click',(function(){u(f)}))}},{key:'initiateFocusTrap',value:function(t){var e=document.querySelector('#'+t),n=e.querySelectorAll(this.focusableElements),i=n[0],o=n[n.length-1];e.addEventListener('keydown',(function(t){'Tab'!==t.key&&9!==t.keyCode||(t.shiftKey?document.activeElement===i&&(o.focus(),t.preventDefault()):document.activeElement===o&&(i.focus(),t.preventDefault()))}))}}],o&&e(i.prototype,o),a&&e(i,a),Object.defineProperty(i,'prototype',{writable:!1}),n}();return n}();
