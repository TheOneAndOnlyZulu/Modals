import t from'striptags';class e{constructor(){this.allowedTags=['a','h1','h2','h3','h4','strong','em','span','ul','li','ol','input','button','textarea','select']}remove(t=!1){const e=document.getElementById('preview-modal');e&&e.remove(),t&&t.focus()}generate({title:e='',description:n='',removeText:o='Cancel',addText:d='',mainContent:i='',callback:a,params:l={},initiatorButton:s}){const c=i?`<div id="content" class="modal__content">${t(i,this.allowedTags)}</div>`:'',r=`\n\t\t<div role="dialog" aria-modal="true" aria-labelledby="modal-title" id="preview-modal" class="modal">\n\t\t\t<div class="modal__container">\n\t\t\t\t<h3 id="modal-title">${e}</h3>\n\t\t\t\t${n?`<p>${t(n)}</p>`:''}\n\t\t\n\t\t\t\t${c}\n\t\t\n\t\t\t\t<div class="modal-buttons is-flex">\n\t\t\t\t\t<button id="preview-modal__close" aria-label="Close" class="btn btn--preview">${t(o)}</button>\n\t\t\t\t\t<button id="preview-modal__do_it" class="btn btn--fill">${t(d)}</button>\n\t\t\t\t</div>\t\t\n\t\t\t</div>\n\t\t</div>`;document.body.insertAdjacentHTML('beforeend',r),this.initiateFocusTrap('preview-modal'),document.getElementById('preview-modal__close').focus(),document.getElementById('preview-modal__close').addEventListener('click',(()=>this.remove(s))),document.getElementById('preview-modal').addEventListener('click',(t=>{'preview-modal'===t.target.getAttribute('id')&&this.remove(s)})),document.body.addEventListener('keydown',(t=>{const e=t||window.event;('key'in e?'Escape'===e.key||'Esc'===e.key:27===e.keyCode)&&this.remove(s)})),document.getElementById('preview-modal__do_it').addEventListener('click',(()=>{a(l)}))}initiateFocusTrap(t){const e=document.querySelector('#'+t),n=e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),o=n[0],d=n[n.length-1];e.addEventListener('keydown',(function(t){'Tab'!==t.key&&9!==t.keyCode||(t.shiftKey?document.activeElement===o&&(d.focus(),t.preventDefault()):document.activeElement===d&&(o.focus(),t.preventDefault()))}))}}export{e as default};
